<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Muhabbet Ku≈üu Flappy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:Arial; }
    body {
        background: linear-gradient(#70c5ce, #b2eaff);
        overflow: hidden;
        touch-action: manipulation;
    }

    canvas {
        display:block;
        margin:0 auto;
    }

    .menu {
        position:fixed;
        inset:0;
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        background:rgba(0,0,0,0.4);
        color:white;
    }

    .menu h1 {
        font-size:32px;
        margin-bottom:20px;
    }

    .menu button {
        padding:12px 25px;
        font-size:18px;
        border:none;
        border-radius:8px;
        background:#ffcc00;
        cursor:pointer;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>

<div class="menu" id="menu">
    <h1>tap and jumpüê¶</h1>
    <button onclick="startGame()">start</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

let bird, pipes, gravity, jump, score, running;

function reset() {
    bird = {
        x: canvas.width * 0.3,
        y: canvas.height / 2,
        v: 0,
        size: 32
    };
    pipes = [];
    gravity = 0.2;
jump = -4;
    score = 0;
}

function startGame() {
    document.getElementById("menu").style.display = "none";
    reset();
    running = true;
    loop();
}

function gameOver() {
    running = false;
    document.getElementById("menu").style.display = "flex";
    document.querySelector(".menu h1").innerText =
        "üí• Oyun Bitti\nSkor: " + score;
    document.querySelector(".menu button").innerText = "Tekrar Oyna";
}

function addPipe() {
    const gap = 170;
    const top = Math.random() * (canvas.height - gap - 100) + 50;
    pipes.push({
        x: canvas.width,
        top,
        bottom: top + gap,
        width: 60,
        passed: false
    });
}

addEventListener("click", () => {
    if (running) bird.v = jump;
});
addEventListener("touchstart", () => {
    if (running) bird.v = jump;
});

let frame = 0;
function loop() {
    if (!running) return;
    requestAnimationFrame(loop);
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Bird
    bird.v += gravity;
    bird.y += bird.v;

    ctx.font = "32px serif";
    ctx.save();
    ctx.translate(bird.x, bird.y);
    ctx.rotate(bird.v * 0.03);
    ctx.fillText("ü¶ú", -16, 16);
    ctx.restore();

    // Pipes
    if (frame % 110 === 0) addPipe();
    frame++;

    for (let i = pipes.length - 1; i >= 0; i--) {
        const p = pipes[i];
        p.x -= 3.2;

        ctx.fillStyle = "#2ecc71";
        ctx.fillRect(p.x, 0, p.width, p.top);
        ctx.fillRect(p.x, p.bottom, p.width, canvas.height);

        // Collision
        if (
            bird.x < p.x + p.width &&
            bird.x + bird.size > p.x &&
            (bird.y < p.top || bird.y + bird.size > p.bottom)
        ) gameOver();

        if (!p.passed && p.x + p.width < bird.x) {
            p.passed = true;
            score++;
        }

        if (p.x + p.width < 0) pipes.splice(i,1);
    }

    // Ground / sky limits
    if (bird.y < 0 || bird.y > canvas.height) gameOver();

    // Score
    ctx.fillStyle = "white";
    ctx.font = "bold 26px Arial";
    ctx.fillText("Skor: " + score, 20, 40);
}
</script>

</body>
</html>